!function(){const e=()=>{const e=document.createElement("style");e.innerHTML=".modern-img-slider-wrapper{position:relative;margin:30px 0;width:100%;-webkit-mask-image:linear-gradient(90deg,transparent 0,#000 5%,#000 95%,transparent 100%);mask-image:linear-gradient(90deg,transparent 0,#000 5%,#000 95%,transparent 100%)}.modern-img-slider{display:flex;gap:15px;overflow-x:auto;scroll-snap-type:x mandatory;padding:20px 5%;-ms-overflow-style:none;scrollbar-width:none;direction:rtl;scroll-behavior:smooth;cursor:grab;user-select:none}.modern-img-slider.grabbing{cursor:grabbing;scroll-snap-type:none;scroll-behavior:auto}.modern-img-slider::-webkit-scrollbar{display:none}.modern-slide{flex:0 0 85%;scroll-snap-align:center;position:relative}.modern-slide img{width:100%;height:260px;object-fit:cover;border-radius:20px;box-shadow:0 8px 25px rgba(0,0,0,.1);filter:grayscale(100%);opacity:.4;transform:scale(.95);transition:all .5s cubic-bezier(.25,1,.5,1);pointer-events:none}.modern-slide.active img{filter:grayscale(0);opacity:1;transform:scale(1);box-shadow:0 15px 35px rgba(0,0,0,.2)}.modern-single-img{width:100%;border-radius:20px;object-fit:cover;box-shadow:0 8px 25px rgba(0,0,0,.1);margin:25px 0;cursor:zoom-in;transition:all .4s ease}.modern-single-img:active{transform:scale(.98)}#lux-lightbox{position:fixed;inset:0;z-index:9999999999;background:rgba(20,20,20,.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);display:flex;flex-direction:column;opacity:0;visibility:hidden;transition:all .3s ease-out;direction:rtl}#lux-lightbox.active{opacity:1;visibility:visible}.lux-top{display:flex;justify-content:space-between;align-items:center;padding:20px 30px}.lux-counter{color:#fff;font-family:var(--font-body,sans-serif);font-size:1.1rem;letter-spacing:1px}.lux-close{background:rgba(255,255,255,.1);color:#fff;border:none;width:45px;height:45px;border-radius:50%;font-size:1.4rem;cursor:pointer;transition:.3s;backdrop-filter:blur(5px);display:grid;place-items:center}.lux-close:hover{background:#fff;color:#000;transform:rotate(90deg)}.lux-main{flex:1;position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden}.lux-main-img{max-width:95%;max-height:100%;object-fit:contain;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.5);user-select:none;transition:opacity .2s,transform .3s}.lux-nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.1);color:#fff;border:none;width:50px;height:50px;border-radius:50%;font-size:1.5rem;cursor:pointer;transition:.3s;backdrop-filter:blur(5px);display:grid;place-items:center;z-index:10}.lux-nav:hover{background:rgba(255,255,255,.3);transform:translateY(-50%) scale(1.1)}.lux-prev{right:20px}.lux-next{left:20px}.lux-thumbs-wrap{padding:20px;background:rgba(0,0,0,.4);border-top:1px solid rgba(255,255,255,.05);display:flex;justify-content:center}.lux-thumbs{display:flex;gap:10px;overflow-x:auto;scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none;max-width:100%}.lux-thumbs::-webkit-scrollbar{display:none}.lux-thumb{width:70px;height:70px;flex-shrink:0;border-radius:10px;object-fit:cover;cursor:pointer;opacity:.3;transition:.3s;box-shadow:0 5px 15px rgba(0,0,0,.3);border:2px solid transparent}.lux-thumb.active{opacity:1;border-color:#fff;transform:translateY(-5px)}@media(max-width:768px){.lux-nav{display:none}.lux-close{top:20px;right:20px;background:rgba(0,0,0,.5)}.modern-slide img{height:220px}}",document.head.appendChild(e)};let t=[],n=0,o,i,c,r,s,l;const d=()=>{o=document.createElement("div"),o.id="lux-lightbox",o.innerHTML='<div class="lux-top"><div class="lux-counter" id="lux-counter"></div><button class="lux-close" id="lux-close"><i class="fas fa-times"></i></button></div><div class="lux-main"><button class="lux-nav lux-prev" id="lux-prev"><i class="fas fa-chevron-right"></i></button><img src="" class="lux-main-img" id="lux-main-img" alt="Gallery"><button class="lux-nav lux-next" id="lux-next"><i class="fas fa-chevron-left"></i></button></div><div class="lux-thumbs-wrap" id="lux-thumbs-wrap"><div class="lux-thumbs" id="lux-thumbs"></div></div>',document.body.appendChild(o),i=document.getElementById("lux-main-img"),c=document.getElementById("lux-counter"),r=document.getElementById("lux-thumbs"),s=document.getElementById("lux-prev"),l=document.getElementById("lux-next"),document.getElementById("lux-close").addEventListener("click",()=>p(!0)),s.addEventListener("click",e=>{e.stopPropagation(),m()}),l.addEventListener("click",e=>{e.stopPropagation(),u()}),o.addEventListener("click",e=>{e.target!==o&&!e.target.classList.contains("lux-main")||p(!0)});let e=0,t=!1;const n=o.querySelector(".lux-main");n.addEventListener("touchstart",t=>{e=t.changedTouches[0].screenX},{passive:!0}),n.addEventListener("touchend",t=>{let n=t.changedTouches[0].screenX;n<e-50&&u(),n>e+50&&m()},{passive:!0}),n.addEventListener("mousedown",n=>{t=!0,e=n.pageX}),n.addEventListener("mouseup",n=>{if(!t)return;t=!1;let o=n.pageX;o<e-50&&u(),o>e+50&&m()}),n.addEventListener("mouseleave",()=>{t=!1})},a=(e,r,s)=>{e&&(e.preventDefault(),e.stopPropagation()),t=r,n=s,x(),o.classList.add("active"),window.history.pushState({luxLb:!0},"")},p=(e=!0)=>{o.classList.remove("active"),e&&window.history.state&&window.history.state.luxLb&&window.history.back()},x=()=>{i.style.opacity="0",i.style.transform="scale(0.95)",setTimeout(()=>{i.src=t[n],i.style.opacity="1",i.style.transform="scale(1)"},150),c.innerText=`${f(n+1)} / ${f(t.length)}`;const e=document.getElementById("lux-thumbs-wrap");if(t.length>1){e.style.display="flex",s.style.display="grid",l.style.display="grid",r.innerHTML="";t.forEach((e,t)=>{const o=document.createElement("img");o.src=e,o.className="lux-thumb"+(t===n?" active":""),o.onclick=e=>{e.stopPropagation(),n=t,x()},r.appendChild(o)});const o=r.querySelector(".active");o&&o.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}else e.style.display="none",s.style.display="none",l.style.display="none"},m=()=>{n=(n-1+t.length)%t.length,x()},u=()=>{n=(n+1)%t.length,x()},f=e=>{const t=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return e.toString().replace(/\d/g,e=>t[e])},g=e=>{let t=!1,n,o;e.addEventListener("mousedown",i=>{t=!0,e.dataset.dragged="false",e.classList.add("grabbing"),n=i.pageX-e.offsetLeft,o=e.scrollLeft}),e.addEventListener("mouseleave",()=>{t=!1,e.classList.remove("grabbing")}),e.addEventListener("mouseup",()=>{t=!1,e.classList.remove("grabbing")}),e.addEventListener("mousemove",i=>{if(!t)return;i.preventDefault();const c=i.pageX-e.offsetLeft,r=c-n;Math.abs(r)>5&&(e.dataset.dragged="true"),e.scrollLeft=o-r*2})},v=e=>{const t=e.querySelectorAll(".modern-slide"),n=e.getBoundingClientRect(),o=n.left+n.width/2;let i=1/0,c=0;t.forEach((e,t)=>{const n=e.getBoundingClientRect(),r=Math.abs(o-(n.left+n.width/2));r<i&&(i=r,c=t)}),t.forEach((e,t)=>e.classList.toggle("active",t===c))},h=()=>{document.querySelectorAll(".content-card .post-body").forEach(e=>{if(e.dataset.galleryInit)return;e.dataset.galleryInit="true";const t=Array.from(e.querySelectorAll("img"));if(0===t.length)return;t.forEach(e=>{let t=e.parentElement;for(;t&&"DIV"!==t.tagName&&"P"!==t.tagName;)"A"===t.tagName&&(t.onclick=e=>e.preventDefault(),t.removeAttribute("href")),t=t.parentElement});let n=[],o=[t[0]];for(let e=1;e<t.length;e++){let n=document.createRange();n.setStartAfter(t[e-1]),n.setEndBefore(t[e]),0===n.toString().replace(/\s+/g,"").length?o.push(t[e]):(n.push(o),o=[t[e]])}n.push(o);const i=t.map(e=>e.src);n.forEach(e=>{if(1===e.length){const n=e[0];n.className="modern-single-img",n.onclick=e=>{e.preventDefault(),e.stopPropagation(),a(e,i,t.indexOf(n))}}else{const n=document.createElement("div");n.className="modern-img-slider-wrapper";const o=document.createElement("div");o.className="modern-img-slider",g(o),e.forEach(e=>{const c=document.createElement("div");c.className="modern-slide";const r=document.createElement("img");r.src=e.src,c.appendChild(r),o.appendChild(c),c.onclick=n=>{"true"!==o.dataset.dragged&&a(n,i,t.indexOf(e))}}),n.appendChild(o),e[0].parentNode.insertBefore(n,e[0]),e.forEach(e=>e.remove()),v(o),o.addEventListener("scroll",()=>{window.requestAnimationFrame(()=>v(o))},{passive:!0}),window.addEventListener("resize",()=>v(o))}})})};window.addEventListener("DOMContentLoaded",()=>{e(),d(),setTimeout(h,50),window.addEventListener("popstate",e=>{o.classList.contains("active")&&p(!1)})}),window.initModernGallery=h}();
